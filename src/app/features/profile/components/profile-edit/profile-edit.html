<div #formContainer class="profile-edit-container" *ngIf="!loading; else loadingTpl">
  <h2>ویرایش پروفایل</h2>

  <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="name">نام</label>
      <input id="name" type="text" formControlName="name" />
      <div class="error" *ngIf="name?.touched && name?.invalid">نام الزامی است.</div>
    </div>

    <div class="form-group">
      <label for="email">ایمیل</label>
      <input id="email" type="email" formControlName="email" />
      <div class="error" *ngIf="email?.touched && email?.invalid">
        <span *ngIf="email?.errors?.['required']">ایمیل الزامی است.</span>
        <span *ngIf="email?.errors?.['email']">فرمت ایمیل معتبر نیست.</span>
      </div>
    </div>

    <div class="form-group">
      <label for="phone">شماره تلفن</label>
      <input id="phone" type="text" formControlName="phone" />
      <div class="error" *ngIf="phone?.touched && phone?.invalid">شماره تلفن معتبر نیست.</div>
    </div>

    <div class="form-group">
      <label for="creditScore">امتیاز اعتباری</label>
      <input id="creditScore" type="number" formControlName="creditScore" />
      <div class="error" *ngIf="creditScore?.touched && creditScore?.invalid">امتیاز باید بین ۰ تا ۹۰۰ باشد.</div>
    </div>

    <div class="form-group">
      <label for="status">وضعیت</label>
      <select id="status" formControlName="status">
        <option value="active">فعال</option>
        <option value="inactive">غیرفعال</option>
      </select>
    </div>

    <div class="actions">
      <button type="submit" [disabled]="saving"> 
        {{ saving ? 'در حال ذخیره...' : 'ذخیره تغییرات' }}
      </button>
      <button type="button" (click)="navigateToProfile()">بازگشت</button>
    </div>
  </form>
</div>

<ng-template #loadingTpl>
  <p style="text-align:center; color:#777; margin-top:30px;">در حال بارگذاری پروفایل...</p>
</ng-template>
